{
  "scylla": {
    "tables": {
      "Users": {
        "TableName": "Users",
        "since": 2.0,
        "PK": "pk",
        "SK": "sk",
        "BillingMode": "PAY_PER_REQUEST",
        "AttributeTypes": { "pk": "S", "sk": "S", "email": "S" },
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "EmailIndex",
            "since": 2.2,
            "KeySchema": [{ "AttributeName": "email", "KeyType": "HASH" }],
            "Projection": { "ProjectionType": "ALL" }
          }
        ]
      },
      "Txn": {
        "TableName": "Txn",
        "since": 2.2,
        "PK": "pk",
        "SK": "sk",
        "BillingMode": "PAY_PER_REQUEST",
        "AttributeTypes": { "pk": "S", "sk": "S", "userId": "S" },
        "GlobalSecondaryIndexes": [
          {
            "IndexName": "UserGSI",
            "since": 2.2,
            "KeySchema": [{ "AttributeName": "userId", "KeyType": "HASH" }],
            "Projection": { "ProjectionType": "KEYS_ONLY" }
          }
        ]
      }
    }
  },
  "postgres": {
    "tables": {
      "users": {
        "since": 2.0,
        "columns": {
          "id":         { "type": "uuid", "primary": true, "notNull": true, "default": "gen_random_uuid()" },
          "email":      { "type": "varchar(320)", "notNull": true, "since": 2.0 },
          "display":    { "type": "varchar(200)", "since": 2.0 },
          "created_at": { "type": "timestamptz", "default": "NOW()", "since": 2.0 }
        },
        "indexes": [
          { "name": "users_email_unq", "unique": true, "columns": ["email"], "since": 2.0 },
          { "name": "users_lower_email_idx", "postgres": { "expression": "LOWER(email)" }, "since": 2.2 }
        ]
      },
      "events": {
        "since": 2.0,
        "columns": {
          "id":          { "type": "bigserial", "primary": true, "postgres": { "type": "bigserial" }, "since": 2.0 },
          "creator_id":  { "type": "uuid", "notNull": true, "since": 2.0 },
          "title":       { "type": "varchar(255)", "notNull": true, "since": 2.0 },
          "starts_at":   { "type": "timestamptz", "notNull": true, "since": 2.0 },
          "ends_at":     { "type": "timestamptz", "notNull": true, "since": 2.0 }
        },
        "indexes": [
          { "name": "events_creator_idx", "columns": ["creator_id", "starts_at"], "since": 2.0 }
        ]
      },
      "transactions": {
        "since": 2.2,
        "columns": {
          "id":            { "type": "uuid", "primary": true, "notNull": true, "default": "gen_random_uuid()" },
          "user_id":       { "type": "uuid", "notNull": true },
          "amount_cents":  { "type": "bigint", "notNull": true },
          "currency":      { "type": "char(3)", "notNull": true },
          "status":        { "type": "varchar(24)", "notNull": true, "since": 2.2 },
          "created_at":    { "type": "timestamptz", "default": "NOW()" }
        },
        "indexes": [
          { "name": "txn_user_idx", "columns": ["user_id", "created_at"], "since": 2.2 }
        ]
      }
    }
  },
  "mysql": {
    "tables": {
      "users": {
        "since": 2.0,
        "columns": {
          "id":         { "type": "char(36)", "primary": true, "notNull": true },
          "email":      { "type": "varchar(320)", "notNull": true, "since": 2.0 },
          "display":    { "type": "varchar(200)", "since": 2.0 },
          "created_at": { "type": "datetime", "default": "NOW()", "since": 2.0 }
        },
        "indexes": [
          { "name": "users_email_unq", "unique": true, "columns": ["email"], "since": 2.0 }
        ],
        "mysql": { "engine": "InnoDB", "charset": "utf8mb4" }
      },
      "events": {
        "since": 2.0,
        "columns": {
          "id":          { "type": "bigint", "autoIncrement": true, "primary": true, "since": 2.0 },
          "creator_id":  { "type": "char(36)", "notNull": true, "since": 2.0 },
          "title":       { "type": "varchar(255)", "notNull": true, "since": 2.0 },
          "starts_at":   { "type": "datetime", "notNull": true, "since": 2.0 },
          "ends_at":     { "type": "datetime", "notNull": true, "since": 2.0 }
        },
        "indexes": [
          { "name": "events_creator_idx", "columns": ["creator_id", "starts_at"], "since": 2.0 }
        ],
        "mysql": { "engine": "InnoDB", "charset": "utf8mb4" }
      },
      "transactions": {
        "since": 2.2,
        "columns": {
          "id":            { "type": "char(36)", "primary": true, "notNull": true },
          "user_id":       { "type": "char(36)", "notNull": true },
          "amount_cents":  { "type": "bigint", "notNull": true },
          "currency":      { "type": "char(3)", "notNull": true },
          "status":        { "type": "varchar(24)", "notNull": true, "since": 2.2 },
          "created_at":    { "type": "datetime", "default": "NOW()" }
        },
        "indexes": [
          { "name": "txn_user_idx", "columns": ["user_id", "created_at"], "since": 2.2 }
        ],
        "mysql": { "engine": "InnoDB", "charset": "utf8mb4" }
      }
    }
  }
}
